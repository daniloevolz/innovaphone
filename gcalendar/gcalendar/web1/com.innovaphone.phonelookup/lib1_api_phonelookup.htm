<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>com.innovaphone.phonelookup (App API)</title>
    <link rel="stylesheet" href="../doc/innovaphone.doc.css" type="text/css" />
</head>

<body>
    <h1>com.innovaphone.phonelookup (App API)</h1>
    <p>
        This API provides an interface for cross-app phone lookups.
    </p>
    <div class="fixme">Write documentation</div>

    <h2>API model</h2>
    <h3>Service info</h3>
    <p>
        The API doesn't define any service info.
    </p>
    <h3>Provider model</h3>
    <p>
        The API doesn't define a provider model.
    </p>

    <h2>API messages</h2>
    <p>
        All messages are JSON objects that have a mandatory attribute "mt" that specifies the message type.
    </p>
    <h3>Requests</h3>
    <dl>
        <dt>Lookup</dt>
        <dd>Starts a search for a given phone number.</dd>
        <dd>
            <dl>
                <dt>prefixIntl</dt>
                <dd>International Prefix</dd>
				<dt>prefixNtl</dt>
                <dd>National Prefix</dd>
				<dt>prefixExt</dt>
                <dd>External Prefix</dd>
				<dt>area</dt>
                <dd>Area Code</dd>
				<dt>country</dt>
                <dd>Country Code</dd>
                <dt>lookup</dt>
                <dd>The number to be searched</dd>
            </dl>
        </dd>
        <dd>Example: <code>{ mt: "Lookup", prefixIntl: "000", prefixNtl: "00", prefixExt:"0", area: "7031", country: "49", lookup: "0004970311234567" }</code></dd>
    </dl>
    <h3>Responses</h3>
    <dl>
        <dt>LookupInfo</dt>
        <dd>Zero or more LookupInfo are returned for each <b>Lookup</b> request</dd>
        <dd>
            <dl>
                <dt>dn</dt>
                <dd>Display name</dd>
                <dt>link</dt>
                <dd>App-Item-Link (if the originating app can display item details)</dd>
                <dt>contact</dt>
                <dd>
                    Directory entry that matches the criteria. An entry contains the following optional members:
                    <dl>
                        <dt>sn, givenname, company, displayname </dt>
                        <dt>telephonenumber (ARRAY), mobile (ARRAY), homephone (ARRAY), extension (ARRAY), facsimiletelephonenumber (ARRAY) </dt>
                        <dt>sip (ARRAY), email (ARRAY)</dt>
                        <dt>title, position, url, department, description, info, roomnumber </dt>
                        <dt>city, street, postalcode, state, country </dt>
                        <dt>privatecity, privatestreet, privatepostalcode, privatestate, privatecountry </dt>
                    </dl>
                </dd>
                <dt>photourl</dt>
                <dd>URL to image data. Could be HTTP/HTTPS url or inline data (data:image/png;base64…).</dd>
                <dt>adjust</dt>
                <dd>Indicates that provided phone numbers might not contain the external line prefix and might need to be adjusted by the phone/softphone app before dialing.</dd>
            </dl>
        </dd>
        <dd>Example: <pre>
    {
        mt: "LookupInfo",
        dn: "Jake Blues",
        link:"someapp?id=4",
        contact: {
            telephonenumber: ["0004970311234567"],
            givenname: "Jake",
            sn: "Blues",
            company: "Blues Brothers",
            sip: ["jbl@example.com"],
            email: ["john.blues@example.com"]
        },
        photourl: "http://1.2.3.4/jbl/avatar.png",
        adjust: true
    }</pre></dd>

        <dt>LookupResult</dt>
        <dd>One single LookupResult is returned for each <b>Lookup</b> request (after all LookupInfo)</dd>
        <dd>
            <dl>
            </dl>
        </dd>
        <dd>Example: <code>{ mt: "LookupResult" }</code></dd>
    </dl>
</body>
</html>
